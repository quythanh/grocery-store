"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[777],{5485:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"install","title":"Installation \ud83d\udee0\ufe0f","description":"Prerequisites","source":"@site/docs/install.md","sourceDirName":".","slug":"/install","permalink":"/grocery-store/docs/install","draft":false,"unlisted":false,"editUrl":"https://github.com/quythanh/grocery-store/blob/main/docs/docs/install.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Introduction \ud83d\ude80","permalink":"/grocery-store/docs/intro"},"next":{"title":"Create a Page","permalink":"/grocery-store/docs/tutorial-basics/create-a-page"}}');var a=s(6070),r=s(6599);const i={},o="Installation \ud83d\udee0\ufe0f",l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Backend",id:"backend",level:2},{value:"Install Warden",id:"install-warden",level:3},{value:"Automatic DNS Resolution",id:"automatic-dns-resolution",level:3},{value:"Linux",id:"linux",level:4},{value:"Setup Magento 2",id:"setup-magento-2",level:3},{value:"Frontend",id:"frontend",level:2},{value:"Install Expo Go",id:"install-expo-go",level:3},{value:"Setup React Native",id:"setup-react-native",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"installation-\ufe0f",children:"Installation \ud83d\udee0\ufe0f"})}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Docker Desktop for Mac 2.2.0.0 or later or Docker for Linux\n(Warden has been tested on Fedora 29 and Ubuntu 18.10)\nor Docker for Windows"}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"docker-compose"})," version 2 or later is required."]}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://git-scm.com/downloads",children:"Git"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"backend",children:"Backend"}),"\n",(0,a.jsx)(n.h3,{id:"install-warden",children:"Install Warden"}),"\n",(0,a.jsx)(n.p,{children:"Warden may be installed via Homebrew on both macOS and Linux hosts:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"brew install wardenenv/warden/warden\nwarden svc up\n"})}),"\n",(0,a.jsx)(n.h3,{id:"automatic-dns-resolution",children:"Automatic DNS Resolution"}),"\n",(0,a.jsx)(n.h4,{id:"linux",children:"Linux"}),"\n",(0,a.jsxs)(n.p,{children:["Add the following line to ",(0,a.jsx)(n.code,{children:"/etc/hosts"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"127.0.0.1 app.grocery-store.test\n"})}),"\n",(0,a.jsx)(n.h3,{id:"setup-magento-2",children:"Setup Magento 2"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Clone repository"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/quythanh/grocery-store-backend\ncd grocery-store-backend\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsxs)(n.li,{children:["Sign an SSL certificate for use with the project (the input here should\nmatch the value of ",(0,a.jsx)(n.code,{children:"TRAEFIK_DOMAIN"})," in the above ",(0,a.jsx)(n.code,{children:".env"})," example file):"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"warden sign-certificate grocery-store.test\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"Start the project environment:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"warden env up\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsxs)(n.li,{children:["Drop into a shell within the project environment. Commands following\nthis step in the setup procedure will be run from within the ",(0,a.jsx)(n.code,{children:"php-fpm"}),"\ndocker container this launches you into:"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"warden shell\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"5",children:["\n",(0,a.jsx)(n.li,{children:"Install libraries"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"composer install\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"6",children:["\n",(0,a.jsx)(n.li,{children:"Install the application and you should be all set:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'## Install Application\nbin/magento setup:install \\\n    --backend-frontname=backend \\\n    --amqp-host=rabbitmq \\\n    --amqp-port=5672 \\\n    --amqp-user=guest \\\n    --amqp-password=guest \\\n    --db-host=db \\\n    --db-name=magento \\\n    --db-user=magento \\\n    --db-password=magento \\\n    --search-engine=opensearch \\\n    --opensearch-host=opensearch \\\n    --opensearch-port=9200 \\\n    --opensearch-index-prefix=magento2 \\\n    --opensearch-enable-auth=0 \\\n    --opensearch-timeout=15 \\\n    --http-cache-hosts=varnish:80 \\\n    --session-save=redis \\\n    --session-save-redis-host=redis \\\n    --session-save-redis-port=6379 \\\n    --session-save-redis-db=2 \\\n    --session-save-redis-max-concurrency=20 \\\n    --cache-backend=redis \\\n    --cache-backend-redis-server=redis \\\n    --cache-backend-redis-db=0 \\\n    --cache-backend-redis-port=6379 \\\n    --page-cache=redis \\\n    --page-cache-redis-server=redis \\\n    --page-cache-redis-db=1 \\\n    --page-cache-redis-port=6379\n\n## Configure Application\nbin/magento config:set --lock-env web/unsecure/base_url \\\n    "https://${TRAEFIK_SUBDOMAIN}.${TRAEFIK_DOMAIN}/"\n\nbin/magento config:set --lock-env web/secure/base_url \\\n    "https://${TRAEFIK_SUBDOMAIN}.${TRAEFIK_DOMAIN}/"\n\nbin/magento config:set --lock-env web/secure/offloader_header X-Forwarded-Proto\n\nbin/magento config:set --lock-env web/secure/use_in_frontend 1\nbin/magento config:set --lock-env web/secure/use_in_adminhtml 1\nbin/magento config:set --lock-env web/seo/use_rewrites 1\n\nbin/magento config:set --lock-env system/full_page_cache/caching_application 2\nbin/magento config:set --lock-env system/full_page_cache/ttl 604800\n\nbin/magento config:set --lock-env catalog/search/enable_eav_indexer 1\n\nbin/magento config:set --lock-env dev/static/sign 0\n\nbin/magento deploy:mode:set -s developer\nbin/magento cache:disable block_html full_page\n\nbin/magento indexer:reindex\nbin/magento cache:flush\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"7",children:["\n",(0,a.jsx)(n.li,{children:"Generate an admin user"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'## Generate localadmin user\nADMIN_PASS="$(pwgen -n1 16)"\nADMIN_USER=localadmin\n\nbin/magento admin:user:create \\\n    --admin-password="${ADMIN_PASS}" \\\n    --admin-user="${ADMIN_USER}" \\\n    --admin-firstname="Local" \\\n    --admin-lastname="Admin" \\\n    --admin-email="${ADMIN_USER}@example.com"\nprintf "u: %s\\np: %s\\n" "${ADMIN_USER}" "${ADMIN_PASS}"\n\n## Configure 2FA provider\nOTPAUTH_QRI=\n# Python 3:\nTFA_SECRET=$(python3 -c "import base64; print(base64.b32encode(bytearray(\'$(pwgen -A1 128)\', \'ascii\')).decode(\'utf-8\'))" | sed \'s/=*$//\')\nOTPAUTH_URL=$(printf "otpauth://totp/%s%%3Alocaladmin%%40example.com?issuer=%s&secret=%s" \\\n    "${TRAEFIK_SUBDOMAIN}.${TRAEFIK_DOMAIN}" "${TRAEFIK_SUBDOMAIN}.${TRAEFIK_DOMAIN}" "${TFA_SECRET}"\n)\n\nbin/magento config:set --lock-env twofactorauth/general/force_providers google\nbin/magento security:tfa:google:set-secret "${ADMIN_USER}" "${TFA_SECRET}"\n\nprintf "%s\\n\\n" "${OTPAUTH_URL}"\nprintf "2FA Authenticator Codes:\\n%s\\n" "$(oathtool -s 30 -w 10 --totp --base32 "${TFA_SECRET}")"\n\nsegno "${OTPAUTH_URL}" -s 4 -o "pub/media/${ADMIN_USER}-totp-qr.png"\nprintf "%s\\n\\n" "https://${TRAEFIK_SUBDOMAIN}.${TRAEFIK_DOMAIN}/media/${ADMIN_USER}-totp-qr.png?t=$(date +%s)"\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"8",children:["\n",(0,a.jsx)(n.li,{children:"Disable 2FA"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"bin/magento module:disable -f Magento_TwoFactorAuth Magento_AdminAdobeImsTwoFactorAuth\n"})}),"\n",(0,a.jsx)(n.h2,{id:"frontend",children:"Frontend"}),"\n",(0,a.jsx)(n.h3,{id:"install-expo-go",children:"Install Expo Go"}),"\n",(0,a.jsxs)(n.p,{children:["You'll need to install ",(0,a.jsx)(n.a,{href:"https://expo.dev/go",children:"Expo Go"})," to test."]}),"\n",(0,a.jsx)(n.h3,{id:"setup-react-native",children:"Setup React Native"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Clone Repository:"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/quythanh/grocery-store-frontend\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"Install dependencies"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},6599:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var t=s(758);const a={},r=t.createContext(a);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);